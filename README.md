# Система автоматического мониторинга качества воздуха в помещениях

## Описание проекта

Система предназначена для сбора, обработки и анализа данных о состоянии воздушной среды в помещениях в режиме реального времени с целью обеспечения нормативного уровня качества воздуха.

## Структура системы

### Подсистемы:
1. **Подсистема сбора данных** - сбор данных с датчиков (температура, влажность, CO₂, пыль)
2. **Подсистема хранения и обработки данных** - PostgreSQL база данных
3. **Подсистема анализа и оценки** - анализ качества воздуха на основе нормативов РБ
4. **Подсистема принятия решений** - автоматическое управление оборудованием
5. **Интерфейсная подсистема** - Flask web-интерфейс

## Технологический стек

- **Backend**: Python 3, Flask
- **Database**: PostgreSQL
- **Frontend**: HTML5, CSS3, Bootstrap 5, Chart.js
- **Architecture**: Service Layer Pattern

## Установка и запуск

### 1. Установка зависимостей

```
cd ~/air_quality_monitoring
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. Настройка PostgreSQL

```
sudo -u postgres createdb air_quality_db
```

### 3. Инициализация базы данных

```
python init_db.py
```

### 4. Запуск приложения

```
python app.py
```

Приложение будет доступно по адресу: http://localhost:5001

## Использование

### Пользователи системы:

1. **Специалист службы контролирования**
   - Просмотр показателей микроклимата
   - Ручное управление оборудованием
   - Добавление измерений

2. **Проектировщик систем микроклимата**
   - Проектирование конфигурации оборудования
   - Получение рекомендаций по оптимизации

3. **Менеджер по эксплуатации**
   - Анализ отчётов
   - Принятие стратегических решений

## Нормативы качества воздуха (РБ)

### Температура:
- Минимум: 18°C
- Оптимум: 20-24°C
- Максимум: 26°C

### Влажность:
- Минимум: 30%
- Оптимум: 40-60%
- Максимум: 65%

### CO₂:
- Оптимум: ≤800 ppm
- Допустимо: ≤1000 ppm
- Максимум: 1400 ppm

### Пыль:
- Оптимум: ≤0.05 мг/м³
- Допустимо: ≤0.15 мг/м³
- Максимум: 0.25 мг/м³

## Принципы проектирования

Код соответствует принципам:
- **SOLID**: разделение ответственности, инверсия зависимостей
- **KISS**: простота и понятность кода
- **DRY**: отсутствие дублирования логики

## Архитектура

```
Models (Data Layer)
    ↓
Services (Business Logic)
    ↓
Controllers (Flask Routes)
    ↓
Views (Templates)
```

## API Endpoints

- `POST /api/rooms` - Создание помещения
- `DELETE /api/rooms/<id>` - Удаление помещения
- `POST /api/sensors` - Создание датчика
- `POST /api/measurements` - Добавление измерения
- `GET /api/measurements/history/<sensor_id>` - История измерений
- `POST /api/equipment` - Создание оборудования
- `PUT /api/equipment/<id>/status` - Обновление статуса оборудования
- `POST /api/decisions/<room_id>` - Принятие решения
- `POST /api/equipment/evaluate` - Оценка конфигурации

## Структура проекта

```
air_quality_monitoring/
├── app.py                 # Точка входа приложения
├── config.py             # Конфигурация
├── init_db.py            # Инициализация БД
├── requirements.txt      # Зависимости
├── .env                  # Переменные окружения
├── models/              # Модели данных
│   ├── room.py
│   ├── sensor.py
│   ├── equipment.py
│   └── measurement.py
├── services/            # Бизнес-логика
│   ├── data_collection.py
│   ├── analysis.py
│   └── decision_making.py
├── database/           # Работа с БД
│   └── db.py
├── static/            # Статические файлы
│   ├── css/style.css
│   └── js/charts.js
└── templates/         # HTML шаблоны
    ├── base.html
    ├── index.html
    ├── rooms.html
    ├── room_detail.html
    ├── equipment.html
    └── reports.html
```

## Функциональность

### Управление помещениями
- Создание, просмотр и удаление помещений
- Отображение площади и описания
- Привязка датчиков и оборудования к помещениям

### Система датчиков
- Поддержка 4 типов датчиков: температура, влажность, CO₂, пыль
- Ручной ввод измерений
- История измерений с визуализацией

### Управление оборудованием
- Поддержка 4 типов оборудования: отопление, вентиляция, кондиционер, увлажнитель
- Ручное и автоматическое управление
- Оценка эффективности работы

### Анализ и принятие решений
- Автоматический анализ качества воздуха
- Сравнение с нормативами РБ
- Автоматическое управление оборудованием на основе анализа
- Рекомендации по улучшению микроклимата

### Отчёты
- Общий статус всех помещений
- Детальная информация по каждому параметру
- Рекомендации по работе оборудования
- Визуализация данных

## Соответствие объектной модели

Реализация полностью соответствует объектной модели из лабораторных работ:

- **ER-диаграмма**: Все сущности (помещения, датчики, оборудование, измерения, решения) реализованы в виде таблиц PostgreSQL
- **BPMN-процессы**: Реализованы бизнес-процессы проектирования конфигурации и корректировки микроклимата
- **Use-case диаграмма**: Покрыты все сценарии для трёх типов пользователей
- **Sequence диаграмма**: Взаимодействие между подсистемами реализовано через сервисный слой

